{"ast":null,"code":"import _slicedToArray from\"/home/aurasonicSkyfire/github/levelUp/zz-poc/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/home/aurasonicSkyfire/github/levelUp/zz-poc/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useReducer,useState}from'react';import{useDispatch}from'react-redux';import{createProject}from'./projectFormSlice';import styles from'./ProjectForm.module.css';// Define Reducer Actions\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateProjectReducer=function CreateProjectReducer(currentState,action){switch(action.type){case'SELECT_STATE':{return _objectSpread(_objectSpread({},currentState),{},{orderState:action.payload});}case'INPUT_NICKNAME':{return _objectSpread(_objectSpread({},currentState),{},{nickname:action.payload});}case'BLUR_NICKNAME':{// create an alert if less than 4 chars\nreturn _objectSpread(_objectSpread({},currentState),{},{nicknameIsValid:currentState.nickname.trim().length>4});}case'INPUT_LOCATION':{return _objectSpread(_objectSpread({},currentState),{},{location:action.payload});}case'BLUR_LOCATION':{// create an alert if less than 4 chars \nreturn _objectSpread(_objectSpread({},currentState),{},{locationIsValid:currentState.location.trim().length>4});}case'INPUT_CLIENT':{return _objectSpread(_objectSpread({},currentState),{},{client:action.payload});}case'BLUR_CLIENT':{// create an alert if less than 4 chars \nreturn _objectSpread(_objectSpread({},currentState),{},{clientIsValid:currentState.client.trim().length>4});}case'INPUT_COMPANY':{return _objectSpread(_objectSpread({},currentState),{},{company:action.payload});}case'INPUT_DELIVERY':{return _objectSpread(_objectSpread({},currentState),{},{deliveryDate:action.payload});}case'SELECT_TERM':{return _objectSpread(_objectSpread({},currentState),{},{rentalTerm:action.payload});}case'INPUT_TAG':{return _objectSpread(_objectSpread({},currentState),{},{tag:action.payload});}default:return currentState;}};// Use Hooks to Handle Local State of Form Data\nvar ProjectForm=function ProjectForm(){// ---- Defines Initial State & 2-Way Bindings to Form Fields\nvar initialFormState={orderState:'',nickname:'',nicknameIsValid:null,location:'',locationIsValid:null,client:'',clientIsValid:null,company:'',deliveryDate:'',rentalTerm:'',tag:''};var _useReducer=useReducer(CreateProjectReducer,initialFormState),_useReducer2=_slicedToArray(_useReducer,2),formState=_useReducer2[0],dispatchFormData=_useReducer2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),formIsValid=_useState2[0],setFormIsValid=_useState2[1];useEffect(function(){formState.nicknameIsValid&&formState.locationIsValid&&formState.clientIsValid&&setFormIsValid(true);},[formState.nicknameIsValid,formState.locationIsValid,formState.clientIsValid]);// ---- Handles Form Field Updates, Dispatch To Reducer\nvar stateChangeHandler=function stateChangeHandler(e){dispatchFormData({type:'SELECT_STATE',payload:e.target.value});};var nicknameHandler=function nicknameHandler(e){dispatchFormData({type:'INPUT_NICKNAME',payload:e.target.value});};var validNicknameHandler=function validNicknameHandler(){dispatchFormData({type:'BLUR_NICKNAME'});};var locationHandler=function locationHandler(e){dispatchFormData({type:'INPUT_LOCATION',payload:e.target.value});};var validLocationHandler=function validLocationHandler(){dispatchFormData({type:'BLUR_LOCATION'});};var clientHandler=function clientHandler(e){dispatchFormData({type:'INPUT_CLIENT',payload:e.target.value});};var validClientHandler=function validClientHandler(e){dispatchFormData({type:'BLUR_CLIENT'});};var companyHandler=function companyHandler(e){dispatchFormData({type:'INPUT_COMPANY',payload:e.target.value});};var deliveryDateHandler=function deliveryDateHandler(e){dispatchFormData({type:'INPUT_DELIVERY',payload:e.target.value});};var termHandler=function termHandler(e){dispatchFormData({type:'SELECT_TERM',payload:e.target.value});};var tagHandler=function tagHandler(e){dispatchFormData({type:'INPUT_TAG',payload:e.target.value});};// ---- Handles Form Submission \n// ### thunk / apollo / logic to Post to DB\n// apollo approach ---\n// dispatch formState to store\n// projectListContainer > useSelector to grab form state\n// pass into useMutation to send POST mutation\n// useEffect to setFilter to GET_SNIPPETS with a dep of mutation data response\n// --- this will trigger a re-render\n// Dispatches Form State to Redux Store\nvar dispatch=useDispatch();var formSubmissionHandler=function formSubmissionHandler(e){e.preventDefault();// console.log(formState)\n// transform data to remove validations\nvar newProject={orderState:formState.orderState,nickname:formState.nickname,location:formState.location,client:formState.client,company:formState.company,deliveryDate:new Date(formState.deliveryDate).toLocaleString(),rentalTerm:formState.rentalTerm,tag:formState.tag};dispatch(createProject(newProject));};return/*#__PURE__*/_jsxs(\"form\",{className:styles.form,onSubmit:formSubmissionHandler,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Project Profile\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"orderState\",children:\"Rental Term\"}),/*#__PURE__*/_jsxs(\"select\",{type:\"text\",name:\"orderState\",id:\"orderState\",value:formState.orderState,onChange:stateChangeHandler,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Draft\",defaultValue:true,children:\"Draft\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Reserved\",children:\"Reserved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"onDeposit\",children:\"onDeposit\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Approved\",children:\"Approved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Subscribed\",children:\"Subscribed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Closed\",children:\"Closed\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nickname\",children:\"Project Nickname* \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nickname\",id:\"nickname\",value:formState.nickname,required:true,onChange:nicknameHandler,onBlur:validNicknameHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"location\",children:\"Location / City* \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",id:\"location\",value:formState.location,required:true,onChange:locationHandler,onBlur:validLocationHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"client\",children:\"Client\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"client\",id:\"client\",required:true,value:formState.client,onChange:clientHandler,onBlur:validClientHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"company\",children:\"Company\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"company\",id:\"company\",value:formState.company,onChange:companyHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"deliveryDate\",children:\"Delivery Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"deliveryDate\",id:\"deliveryDate\",value:formState.deliveryDate,onChange:deliveryDateHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rentalTerm\",children:\"Rental Term\"}),/*#__PURE__*/_jsxs(\"select\",{type:\"text\",name:\"rentalTerm\",id:\"rentalTerm\",value:formState.rentalTerm,onChange:termHandler,children:[/*#__PURE__*/_jsx(\"option\",{value:\"12\",defaultValue:true,children:\"12 Months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1 Month\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3 Months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"6\",children:\"6 Months\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tag\",children:\"Tag\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"tag\",id:\"tag\",value:formState.tag,onChange:tagHandler}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",\"aria-label\":\"Submit form\",disabled:!formIsValid,children:\"Create Draft Project\"})]});};export default ProjectForm;","map":{"version":3,"sources":["/home/aurasonicSkyfire/github/levelUp/zz-poc/client/src/features/ProjectsContent/ProjectForm/ProjectForm.jsx"],"names":["React","useEffect","useReducer","useState","useDispatch","createProject","styles","CreateProjectReducer","currentState","action","type","orderState","payload","nickname","nicknameIsValid","trim","length","location","locationIsValid","client","clientIsValid","company","deliveryDate","rentalTerm","tag","ProjectForm","initialFormState","formState","dispatchFormData","formIsValid","setFormIsValid","stateChangeHandler","e","target","value","nicknameHandler","validNicknameHandler","locationHandler","validLocationHandler","clientHandler","validClientHandler","companyHandler","deliveryDateHandler","termHandler","tagHandler","dispatch","formSubmissionHandler","preventDefault","newProject","Date","toLocaleString","form"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer, useState } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { createProject } from './projectFormSlice';\n\nimport styles from './ProjectForm.module.css';\n\n// Define Reducer Actions\nconst CreateProjectReducer = (currentState, action) => {\n  switch (action.type) {\n    case 'SELECT_STATE' : {\n      return {\n        ...currentState,\n        orderState: action.payload,\n      }\n    }\n    case 'INPUT_NICKNAME' : {\n      return {\n        ...currentState,\n        nickname: action.payload,\n      }\n    }\n    case 'BLUR_NICKNAME' : {\n      // create an alert if less than 4 chars\n      return {\n        ...currentState,\n        nicknameIsValid: currentState.nickname.trim().length > 4,\n      }\n    }\n    case 'INPUT_LOCATION' : {\n      return {\n        ...currentState,\n        location: action.payload,\n      }\n    }\n    case 'BLUR_LOCATION' : {\n      // create an alert if less than 4 chars \n      return {\n        ...currentState,\n        locationIsValid: currentState.location.trim().length > 4,\n      }\n    }\n    case 'INPUT_CLIENT' : {\n      return {\n        ...currentState,\n        client: action.payload,\n      }\n    }\n    case 'BLUR_CLIENT' : {\n      // create an alert if less than 4 chars \n      return {\n        ...currentState,\n        clientIsValid: currentState.client.trim().length > 4,\n      }\n    }\n    case 'INPUT_COMPANY' : {\n      return {\n        ...currentState,\n        company: action.payload,\n      }\n    }\n    case 'INPUT_DELIVERY' : {\n      return {\n        ...currentState,\n        deliveryDate: action.payload,\n      }\n    }\n    case 'SELECT_TERM' : {\n      return {\n        ...currentState,\n        rentalTerm: action.payload,\n      }\n    }\n    case 'INPUT_TAG' : {\n      return {\n        ...currentState,\n        tag: action.payload,\n      }\n    }\n    default: \n    return currentState;\n  }\n}\n\n// Use Hooks to Handle Local State of Form Data\nconst ProjectForm = () => {\n  // ---- Defines Initial State & 2-Way Bindings to Form Fields\n  const initialFormState = {\n    orderState: '',                     \n    nickname: '',\n    nicknameIsValid: null,\n    location: '',\n    locationIsValid: null,\n    client: '',\n    clientIsValid: null,\n    company: '',\n    deliveryDate: '',\n    rentalTerm: '',\n    tag: '',\n  };\n  const [formState, dispatchFormData] = useReducer(CreateProjectReducer, initialFormState);\n  \n  const [formIsValid, setFormIsValid] = useState(false);\n  \n  useEffect(() => {\n    (formState.nicknameIsValid && formState.locationIsValid && formState.clientIsValid) && setFormIsValid(true);\n  }, [formState.nicknameIsValid, formState.locationIsValid, formState.clientIsValid]);\n\n  // ---- Handles Form Field Updates, Dispatch To Reducer\n  const stateChangeHandler = (e) => {\n    dispatchFormData({type:'SELECT_STATE', payload: e.target.value})\n  };\n\n  const nicknameHandler = (e) => {\n    dispatchFormData({type:'INPUT_NICKNAME', payload: e.target.value})\n  };\n  const validNicknameHandler = () => {\n    dispatchFormData({type:'BLUR_NICKNAME'})\n  };\n\n  const locationHandler = (e) => {\n    dispatchFormData({type: 'INPUT_LOCATION', payload: e.target.value})\n  };\n  const validLocationHandler = () => {\n    dispatchFormData({type: 'BLUR_LOCATION'})\n  };\n\n  const clientHandler = (e) => {\n    dispatchFormData({type: 'INPUT_CLIENT', payload: e.target.value})\n  };\n  const validClientHandler = (e) => {\n    dispatchFormData({type: 'BLUR_CLIENT'})\n  };\n\n  const companyHandler = (e) => {\n    dispatchFormData({type: 'INPUT_COMPANY', payload: e.target.value})\n  };\n\n  const deliveryDateHandler = (e) => {\n    dispatchFormData({type: 'INPUT_DELIVERY', payload: e.target.value})\n  };\n\n  const termHandler = (e) => {\n    dispatchFormData({type: 'SELECT_TERM', payload: e.target.value})\n  };\n\n  const tagHandler = (e) => {\n    dispatchFormData({type: 'INPUT_TAG', payload: e.target.value})\n  };\n\n\n  // ---- Handles Form Submission \n\n\n  // ### thunk / apollo / logic to Post to DB\n  // apollo approach ---\n  // dispatch formState to store\n  // projectListContainer > useSelector to grab form state\n  // pass into useMutation to send POST mutation\n  // useEffect to setFilter to GET_SNIPPETS with a dep of mutation data response\n  // --- this will trigger a re-render\n  \n  // Dispatches Form State to Redux Store\n  const dispatch = useDispatch();\n  const formSubmissionHandler = e => {\n    e.preventDefault();\n    // console.log(formState)\n    // transform data to remove validations\n    const newProject = {\n      orderState: formState.orderState,                     \n      nickname: formState.nickname,\n      location: formState.location,\n      client: formState.client,\n      company: formState.company,\n      deliveryDate: new Date(formState.deliveryDate).toLocaleString(),\n      rentalTerm: formState.rentalTerm,\n      tag: formState.tag\n    }\n\n    dispatch(createProject(newProject));\n  };\n  \n  return (\n    <form className={styles.form} onSubmit={formSubmissionHandler}>\n      <h2>Project Profile</h2>\n      \n      <label htmlFor=\"orderState\" >Rental Term</label>\n      <select type=\"text\" \n              name=\"orderState\"   \n              id=\"orderState\" \n              value={formState.orderState}\n              onChange={stateChangeHandler} >\n        <option value=\"Draft\" defaultValue>Draft</option>\n        <option value=\"Reserved\">Reserved</option>\n        <option value=\"onDeposit\">onDeposit</option>\n        <option value=\"Approved\">Approved</option>\n        <option value=\"Subscribed\">Subscribed</option>\n        <option value=\"Closed\">Closed</option>\n      </select>\n\n      <label htmlFor=\"nickname\" >Project Nickname* </label>\n      <input type=\"text\" \n              name=\"nickname\" \n              id=\"nickname\" \n              value={formState.nickname}\n              required={true} \n              onChange={nicknameHandler}\n              onBlur={validNicknameHandler} >\n      </input>\n      \n      <label htmlFor=\"location\" >Location / City* </label>\n      <input type=\"text\" \n              name=\"location\" \n              id=\"location\" \n              value={formState.location}\n              required={true} \n              onChange={locationHandler}\n              onBlur={validLocationHandler} >\n      </input>\n      \n      <label htmlFor=\"client\" >Client</label>\n      <input type=\"text\" \n              name=\"client\" \n              id=\"client\" \n              required={true} \n              value={formState.client}\n              onChange={clientHandler} \n              onBlur={validClientHandler} >\n      </input>\n\n      <label htmlFor=\"company\" >Company</label>\n      <input type=\"text\" \n              name=\"company\" \n              id=\"company\" \n              value={formState.company}\n              onChange={companyHandler} >\n      </input>\n\n      <label htmlFor=\"deliveryDate\" >Delivery Date</label>\n      <input type=\"date\" \n              name=\"deliveryDate\" \n              id=\"deliveryDate\" \n              value={formState.deliveryDate}\n              onChange={deliveryDateHandler}>\n      </input>\n\n      <label htmlFor=\"rentalTerm\" >Rental Term</label>\n      <select type=\"text\" \n              name=\"rentalTerm\"   \n              id=\"rentalTerm\" \n              value={formState.rentalTerm}\n              onChange={termHandler} >\n        <option value=\"12\" defaultValue>12 Months</option>\n        <option value=\"1\">1 Month</option>\n        <option value=\"3\">3 Months</option>\n        <option value=\"6\">6 Months</option>\n      </select>\n\n      <label htmlFor=\"tag\" >Tag</label>\n      <input type=\"text\" \n              name=\"tag\" \n              id=\"tag\" \n              value={formState.tag}\n              onChange={tagHandler}>\n      </input>\n\n      <button type=\"submit\" aria-label=\"Submit form\" disabled={!formIsValid}>Create Draft Project</button>\n    </form>\n  )\n};\n\nexport default ProjectForm;\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}